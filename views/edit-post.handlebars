<article class="post">
  <p><a href="/dashboard"> &larr; Back to dashboard</a></p>
  <div style="margin-bottom:1rem">
    <h2>{{#if post.id}}Edit{{else}}New{{/if}} Post</h2>
  </div>

  <form id="edit-form">
    <input type="hidden" name="id" value="{{#if post.id}}{{post.id}}{{/if}}" />
    <input type="hidden" name="tag-ids" value="" />
    <div>
      <label for="title">Title:</label><br>
      <input id="post-input" type="text" name="title" {{#if post.id}} value="{{post.title}}" {{/if}}
        placeholder="Post Title" />
    </div>
    <div>
      <label for="description">Description:</label><br>
      <textarea id="text-input" name="description" rows="5"
        placeholder="Post content...">{{#if post.description}}{{post.description}}{{/if}}</textarea>
    </div>
    <div>
      <label for="image_url">Upload A Photo:</label><br>
      <input id="post-input" type="text" name="image_url" {{#if post.id}} value="{{post.image_url}}" {{/if}}
        placeholder="Upload a photo" readonly="readonly" />
    </div>
    <div>
      <label for="latitude">Location:</label><br>
      <input id="post-input" type="text" name="latitude" {{#if post.id}} value="{{post.latitude}}" {{/if}}
        placeholder="latitude" />
      <input id="post-input" type="text" name="longitude" {{#if post.id}} value="{{post.longitude}}" {{/if}}
        placeholder="longitude" />
    </div>
    <div id="tag-section">
      <ul class="tag-list tag-inputs">
        {{#each tags}}
        <li class="tag-list-item">
          <input id="tag-{{id}}-btn" class="tag-input hidden" type="checkbox" value="{{id}}" {{#if checked}}
            checked="checked" {{/if}} />
          <label for="tag-{{id}}-btn">{{tag_name}}</label>
        </li>
        {{/each}}
      </ul>
    </div>
    <div>
      {{#if post.id}}
      by you on {{format_date post.created_at}}
      |
      <a href="/post/{{post.id}}">{{post.comments.length}} {{format_plural 'comment' post.comments.length}}</a>
      {{/if}}
    </div>
    <div>
      <br>
      <button class="save-btn" type="submit">Save post</button>
      {{#if post.id}}<button type="button" class="delete-post-btn delete-btn">Delete post</button>{{/if}}
    </div>
  </form>
</article>


{{#if post.id}}
{{> comments post}}
{{/if}}

<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
<script src="/javascript/edit-post.js"></script>
{{#if post.id}}
<script src="/javascript/delete-post.js"></script>
<script src="/javascript/comment.js"></script>
{{/if}}